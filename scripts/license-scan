#!/usr/bin/env bash
set -euo pipefail
source "$(dirname "$0")/_common.sh"

ensure_command pip-licenses

OUTPUT_DIR="${REPO_ROOT}/reports"
mkdir -p "${OUTPUT_DIR}"
RAW_REPORT="${OUTPUT_DIR}/pip-licenses.json"

pip-licenses --from=auto --format=json --with-urls --output-file "${RAW_REPORT}"

python "${REPO_ROOT}/scripts/_license_gate.py"
